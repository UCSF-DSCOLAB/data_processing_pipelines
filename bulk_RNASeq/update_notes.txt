When running:
First log in to the den node then run contents of:
/krummellab/data1/ipi/software/nextflow/20.10.0_build_5430/SOURCE_THIS

Currently, that's:
module load CBI openjdk/1.8.0_292-b10-1
export PATH=/krummellab/data1/ipi/software/nextflow/20.10.0_build_5430:${PATH}

Then make a params.yml and run!


Packages:

fastp:
- using 0.19.6
- current 0.20.1
- news:
  0.19.7: support blank records, https://github.com/OpenGene/fastp/issues/133
  0.19.8: new -m/--merge option to merge paired reads.
  0.19.10: fix a bug in fastareader for FASTA with space in name
  0.20.0 Revise overlap detection, PE correction and adapter trimming
    Support average quality score filter
    Count polyX
    ...
  0.20.1: Fix plotly.js issue
- NOTES: 0.20 seems a revision worth assessing what changes were made specifically, but it doesn't seem anything has changed that affects out utilization.

bwa:
- using 0.7.12 (Dec 2014)
- current 0.7.17 (Oct 2017)
- news:
    Release 0.7.17 (23 October 2017)
    This release adds option -q to preserve the mapping quality of split alignment with a lower alignment score than the primary alignment. Option -5 automatically applies -q as well.

    (0.7.17: 23 October 2017, r1188)

    Release 0.7.16 (30 July 2017)
    This release added a couple of minor features and incorporated multiple pull requests, including:

    Added option -5, which is useful to some Hi-C pipelines.

    Fixed an error with samtools sorting (#129). Updated download link for GRCh38 (#123). Fixed README MarkDown formatting (#70). Addressed multiple issues via a collected pull request #139 by @jmarshall. Avoid malformatted SAM header when -R is used with TAB (#84). Output mate CIGAR (#138).

    (0.7.16: 30 July 2017, r1180)

    Release 0.7.15 (31 May 2016)
    Fixed a long existing bug which potentially leads to underestimated insert size upper bound. This bug should have little effect in practice.

    (0.7.15: 31 May 2016, r1140)

    Release 0.7.14 (4 May 2016)
    In the ALT mapping mode, this release adds the "AH:*" header tag to SQ lines corresponding to alternate haplotypes.

    (0.7.14: 4 May 2016, r1136)

    Release 0.7.13 (23 Feburary 2016)
    This release fixes a few minor bugs in the previous version and adds a few minor features. All BWA algorithms should produce identical output to 0.7.12 when there are no ALT contigs.

    Detailed changes:

    Fixed a bug in "bwa-postalt.js". The old version may produce 0.5% of wrong bases for reads mapped to the ALT contigs.

    Fixed a potential bug in the multithreading mode. It may occur when mapping is much faster than file reading, which should almost never happen in practice.

    Changed the download URL of GRCh38.

    Removed the read overlap mode. It is not working well.

    Added the ropebwt2 algorithm as an alternative to index large genomes. Ropebwt2 is slower than the "bwtsw" algorithm, but it has a permissive license. This allows us to create an Apache2-licensed BWA (in the "Apache2" branch) for commercial users who are concerned with GPL.

    (0.7.13: 23 Feburary 2016, r1126)

samtools:
- using 1.3.1 (Beta Apr 2016)
- current 1.12 (mar 2021)
- pieces used:
  - view ( b F o, @ C T o, )  {F 0x4 = remove non mapped reads, b/C = bam/cram, T&references}
  - sorting ( m @ O reference)
  - index
  - flagstat
- news: There's A LOT https://github.com/samtools/samtools/blob/develop/NEWS
  - Our used inputs don't change.
  - We can add multi-threading got BAM / CRAM conversion now with -@ & -m
  - I think there's now tab completion if we want.  Not sure if for free or need to source something *shrug*.  Not super needed.
  - Flag exclusion could be achieved with "-G 12" in view now.  Might be easier to read, but not super needed.
  - sort now has a -t input for sorting by a TAG values
  - efficiency boosts and better memory limiting
  - compression levels can be specified not wif level=NUM
  - Now uses HTSlib header API, so some previously okay files might be deemed illegal now
    Examples of problems that will now be rejected include @SQ lines with no SN: tag, and @RG or @PG lines with no ID: tag.
  - Automatically, '@PG' header lines are added to sam/bam/cram files, with many commands, unless '--no-PG' option is added.
  - reading/writing efficiency Improvements
  - now supports BGZF-compression
  - New '--write-index' option allows output of indexes on output
  - Can use 'samtools coverage -m' to see a histogram of read coverage accross seqs of the reference
  - flagstat: Can have write its output to JSON or tsv format
  - view: can use new '-d' or '-D' to filter to only reads with certain tag type/values.
  - view: Now HTSlib filtering view '-e' aand longer option
  - view: Now has option -N for filtering to read names of interest
***
- To Do Then:
  - add threading to bam/cram conversions
  - add '--no-PG' to most calls
  - add '--write-index' and remove explixit calls to 'index'
***

picard:
- using 2.18.14 (Sept 2018)
- current 2.25.5 (May 2021)
- max current image = 2.25.3
- pieces used:
  - ViewSam
  - SamToFastq
  - MarkDuplicates
  - CollectRnaSeqMetrics
  - CollectAlignmentSummaryMetrics
- news:
  MANY.  In scan of https://github.com/broadinstitute/picard/releases, these ones seemed potentially impactful:
  - can use CRAM inputs for markDuplicates as of 2.20.1
  - added a MIN_TARGET_COVERAGE to Hs Metrics in 2.20.4
  - relaxed VCF index req. for tools that don't need one in 2.20.6
  - MarkDuplicatesMetric file is now ordered (?) as of 2.20.8
  - CollectRnaSeqMetrics: Made IGNORE_SEQUENCE optional in 2.21.4
  - Improvements to CompareMetrics - Now gives fuller description of differences in metrics in 2.22.3
  - Several changes to metrics collections (AlignmentSummaryMetrics and WgsMetrics) + some fluff (#1555) in 2.23.4
  - Added a metric to CollectAlignmentSummaryMetrics for the mean length of 3' softclips in 2.24.0
  - [refactor] Large refactor of IlluminaBaseCallsConverter 2.25.0
- To Do:
  - Build singularity for 2.25.5

STAR:
- using 2.6.1b
- current 2.7.9a
- max current image = 2.7.8a
- news: https://github.com/alexdobin/STAR/blob/master/RELEASEnotes.md
  - mainly STARsolo updates for scRNAseq
  - chimeric read alignment reporting improvements (cann noutput them specifically)
  - STARconsensus: can give a vcf in the genome generation stage to have a transformed reference that reads get mapped to
  *nothing necessary for us, but we would need to remake all references, so maybe NO?

pigz in utils v1:
- using
- current
- news:

RSEM:
- using 1.3.1 (Jun 2018)
- current 1.3.3 (Feb 2020)
- news: https://deweylab.github.io/RSEM/updates.html
  - 1.3.2 allows to run without crashing even if there are zero aligned reads
  - 1.3.3 adds a --hisat2-hca option to use parameters of the Human Cell Atlas & fixed a bug in the RSEM simulator.
summary: probably not important to upgrade, but also, why not *shrugs*






